---
title: "Project 2: Unveiling Ecological Dynamics Through Simulation and Visualization of Biodiversity Data Cubes"
subtitle: "Exploration google form"
author: "Ward Langeraert"
date: "`r Sys.Date()`"
output:
  bookdown::html_document2:
    code_folding: hide
    toc: true
    toc_float: true
    toc_collapsed: true
bibliography: references.bib
editor_options: 
  chunk_output_type: console
---

```{r setup, message=FALSE, warning=FALSE}
# Setup
library(knitr)
library(here)
opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE)
opts_knit$set(root.dir = here())

# Packages
library(tidyverse)
```

# Read in data and data preparation

```{r}
# Read in responses Google Sheet
responses_raw <- googlesheets4::read_sheet(
  paste("https://docs.google.com/spreadsheets/d",
        "1bKGLzC8iyF5voXsrWJF0iyo6cH_y4ZCuyUZcXGWhrWM/edit?usp=sharing",
        sep = "/")
  )

# Only keep last response
responses_df <- responses_raw %>%
  mutate(full_name = paste(`First name`, `Last name`)) %>%
  group_by(full_name) %>%
  top_n(1, Timestamp) %>%
  rename_with(tolower) %>%
  select(timestamp,
         first_name = `first name`,
         last_name = `last name`,
         full_name,
         affiliation,
         country = `from which country did you come to get to this event?`,
         email = `email address`,
         github_user = `github user name`,
         fav_lang = `what is your favourite programming language?`,
         fav_beer = `what is your favourite belgian beer?`,
         main_interest = `write 1-5 keywords for your main interests for this hackathon (separate them by commas)? for example: algorithms, r programming, spatial analyses, sampling bias`,
         lowlevel_tasks = `in which lowlevel tasks would you be interested?`,
         highlevel_tasks = `in which highlevel tasks would you be interested?`,
         technical_tasks = `in which technical tasks would you be interested?`,
         creative_tasks = `in which creative tasks would you be interested?`,
         other_tasks = `any other tasks you would like to do not in the previous lists (separate them by commas)?`,
         package_name = `do you want to change the r package name? if yes, what name do you propose?`
         )
```

# Data exploration

In total, we have `r nrow(responses_df)` responses.

Where does everyone come from?

```{r}
responses_df %>%
  group_by(country) %>%
  mutate(order_var = n()) %>%
  ungroup() %>%
  mutate(country = reorder(country, order_var, decreasing = TRUE)) %>%
  ggplot(aes(x = country)) +
    geom_bar(aes(fill = country)) +
    geom_label(stat = "count", aes(label = after_stat(count))) +
    labs(title = "From which country did you come to get to this event?",
         x = "country") +
    theme_minimal() +
    theme(legend.position = "")
```

What are our favourite programming languages?

```{r}
responses_df %>%
  group_by(fav_lang) %>%
  mutate(order_var = n()) %>%
  ungroup() %>%
  mutate(fav_lang = reorder(fav_lang, order_var, decreasing = TRUE)) %>%
  ggplot(aes(x = fav_lang)) +
    geom_bar(aes(fill = fav_lang)) +
    geom_label(stat = "count", aes(label = after_stat(count))) +
    labs(title = "What is your favourite programming language?",
         x = "language") +
    theme_minimal() +
    theme(legend.position = "")
```

What are our favourite Belgian beers?

```{r}
responses_df %>%
  group_by(fav_beer) %>%
  mutate(order_var = n()) %>%
  ungroup() %>%
  mutate(fav_beer = reorder(fav_beer, order_var, decreasing = TRUE)) %>%
  ggplot(aes(x = fav_beer)) +
    geom_bar(aes(fill = fav_beer)) +
    geom_label(stat = "count", aes(label = after_stat(count))) +
    labs(title = "What is your favourite Belgian beer?",
         x = "beer") +
    theme_minimal() +
    theme(legend.position = "")
```

# Task interests

Lets have a look where our interests lie.

```{r}
responses_df %>% 
  mutate(main_interest = strsplit(as.character(main_interest), ",")) %>% 
  unnest(main_interest) %>%
  group_by(main_interest) %>%
  mutate(order_var = n()) %>%
  ungroup() %>%
  mutate(main_interest = reorder(main_interest, order_var, decreasing = TRUE)) %>%
  ggplot(aes(x = main_interest)) +
    geom_bar(aes(fill = main_interest)) +
    geom_label(stat = "count", aes(label = after_stat(count))) +
    labs(title = "What your main interests for this hackathon?",
         x = "interests") +
    theme_minimal() +
    theme(legend.position = "")
```


